@using GoM.Models
@model IEnumerable<GoM.Models.Product>

@{
    ViewBag.Title = "Checkout";
}



<div class="container margin-top-30">
    <h3>Sum: $@Database.Account.ShoppingCart.Amount</h3>
    <div class="row">
        @foreach (var product in Model)
            {
            <div class="col-md-4 margin-top-30">
                <a href="#" class="thumbnail">
                    <img src="@product.Album.ImageSource" />
                </a>
                <h3>@product.Album.Artist - @product.Album.Title</h3>
                <h4>Price: $@product.Album.Price</h4>
                <h4>Genre: @product.Album.Genre</h4>
                <p>Number Of Tracks: @product.Album.NumberOfSongs</p>
                <p>In Stock: @product.Album.InStock</p>
                @if (product.Album.InStock > 0)
                {
                    @*<form class="form-inline">
                        <div class="form-group">
                            <label>Qty:</label>
                            <input type="number" value="@Database.Account.ShoppingCart.Products.Where(p => p.Album.Title == product.Album.Title).Count()" class="form-control">
                        </div>
                        <button class="btn btn-danger"><span class="glyphicon glyphicon-shopping-cart"></span> @Html.ActionLink("Add To Cart", "AddToCart", new { product.Album.Id })</button>
                    </form>*@

                    <form class="form-inline">
                        <div class="form-group">
                            <label>Qty:</label>
                            <input type="number" value="@Database.Account.ShoppingCart.Products.Where(p => p.Album.Title == product.Album.Title).Count()" class="form-control">
                            <input type="submit" name="addToCart" class="btn btn-danger form-control" value="Add to cart"  />
                        </div>
                        @*<a href="#" class="btn btn-danger"><span class="glyphicon glyphicon-shopping-cart"></span> Add to cart</a>*@
                    </form>

                }

                else
                {
                    <h4 class="text-danger">Out of stock</h4>
                }
            </div>
        }

    </div>
</div>
